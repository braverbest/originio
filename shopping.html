<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Fly Through</title>
    <meta name="description" content="Cursor - A-Frame">
    <script src="aframe.js"></script>
    <script src="../js/aframe-text-component.js"></script>
    <script type="text/javascript">
    </script>
  </head>
  <body>
  <canvas id="myCanvas"></canvas>
    <a-scene>
      <a-assets>
        <a-mixin id="cube" geometry="primitive:box"></a-mixin>
        <a-mixin id="red" material="color: #F35F5F"></a-mixin>
        <a-mixin id="blue" material="color: #36A3EB"></a-mixin>
        <a-mixin id="green" material="color: #9DE0AD"></a-mixin>
        <a-mixin id="yellow" material="color: #F1EA65"></a-mixin>
        <a-mixin id="ring" geometry="primitive: ring; radiusOuter: 0.20;
                          radiusInner: 0.15;"
                material="color: cyan; shader: flat"
                cursor=" fuse: true"></a-mixin>
        <a-mixin id="sphere" geometry="primitive:sphere"></a-mixin>
        <a-mixin id="black" material="color:#000000"></a-mixin>
        <img id="addtocart" src="../img/addtocart.png">
        <img id="removefromcart" src="../img/removefromcart.png">
        <img id="priceimg" src="../img/price.jpg">
        <img id="quantityimg" src="../img/quantity.jpg">
        <img id="num1" src="../img/1.jpg">
        <img id="num2" src="../img/2.jpg">
        <img id="num3" src="../img/3.jpg">
        <img id="space" src="../img/spaceSky.jpg">
        <a-asset-item id="num11" src="../models/1.x3d"></a-asset-item>
      </a-assets>
      <a-sky src="#space"></a-sky>
      <a-entity position="0 2.2 4">
      <a-entity camera look-controls wasd-controls><a-entity mixin="ring" position="0 0 -3">
        <a-animation begin="cursor-click" easing="ease-in" attribute="scale"
               fill="backwards" from="0.3 0.3 0.3" to="1 1 1"></a-animation>
        <a-animation begin="cursor-fusing" easing="ease-in" attribute="scale"
               fill="forwards" from="1 1 1" to="0.3 0.3 0.3"></a-animation>
      </a-entity></a-entity>
      </a-entity>
      <a-entity position="-1.5 2 0">
        <a-entity mixin="red cube" id="redcube" visible="false">
          <a-animation begin="cursor-click" attribute="position" from="0 0 0"
                       to="-2 -2 1" dur="2000" fill="both"></a-animation>
        </a-entity>
      </a-entity>
      <a-entity position="-1.5 2 0">
        <a-entity mixin="blue cube" id="bluecube" visible="false">
          <a-animation begin="cursor-click" attribute="position" from="0 0 0"
                       to="-2 2 1" dur="2000" fill="both" repeats="1"></a-animation>
        </a-entity>
      </a-entity>
      <a-entity position="-1.5 2 0">
        <a-entity mixin="yellow cube" id="yellowcube" visible="false">
          <a-animation begin="cursor-click" attribute="position" from="0 0 0"
                       to="2 -2 0" dur="1500" fill="both"></a-animation>
        </a-entity>
      </a-entity>
      <a-entity position="-1.5 2 0">
        <a-entity mixin="green cube" id="greencube">
          <a-animation begin="cursor-click" attribute="position" from="0 0 0"
                       to="2 2 0" dur="1500" fill="both" id="greenani"></a-animation>
        </a-entity>
      </a-entity>
      <!-- <a-entity position="-1.5 -2 0">
      <a-entity mixin="red sphere"></a-entity>
      </a-entity> -->
      <a-entity position="-1.8 -3 0"><a-plane  rotation="-45 0 0" width="2" height="1.6" src="#addtocart" id="cart">
        <a-animation begin="cursor-click" attribute="scale" from="1 1 1" to="1.2 1.2 1.2" dur="1000"></a-animation>
      </a-plane></a-entity>
      <!-- <a-entity position="0 0 0"><a-obj-model src="#num11"></a-obj-model></a-entity> -->
      <a-entity id="numbers" visible="false">
        <a-entity position="-1.5 2.2 0"><a-plane id="price" width="3.6" height="3" src="#priceimg" visible="false"></a-plane>
        </a-entity>
        <a-entity position="-1.5 0.55 0"><a-plane id="quantity" width="3.6" height="0.45" src="#quantityimg" visible="false"></a-plane></a-entity>

<!--         <a-entity position="-1.7 0.35 0"><a-plane width="0.3" height="0.05" color="#000000"></a-plane></a-entity> -->
        <a-entity position="-1.5 0.2 0"><a-ring radius-inner="0.04" radius-outer="0.08" color="#36A3EB"></a-ring></a-entity>
        <a-entity position="-1.5 0 0"><a-plane width="0.2" height="0.2" src="#num1"></a-plane></a-entity>

<!--         <a-entity position="-1.1 0.35 0"><a-plane width="0.3" height="0.05" color="#000000"></a-plane></a-entity> -->
        <a-entity position="-1.1 0.2 0"><a-ring radius-inner="0.04" radius-outer="0.08" color="#36A3EB"></a-ring></a-entity>
        <a-entity position="-1.1 0.0 0"><a-plane width="0.2" height="0.2" src="#num2"></a-plane></a-entity>

<!--         <a-entity position="-0.7 0.35 0"><a-plane width="0.3" height="0.05" color="#000000"></a-plane></a-entity> -->
        <a-entity position="-0.7 0.2 0"><a-ring radius-inner="0.04" radius-outer="0.08" color="#36A3EB"></a-ring></a-entity>
        <a-entity position="-0.7 0 0"><a-plane width="0.2" height="0.2" src="#num3"></a-plane></a-entity>

      </a-entity>

      <a-entity text="text: What's up;size:0.2" material="color: #5F818A"></a-entity>

      <a-entity id="happy" position="0 2 -10">
        <a-entity mixin="red" line="path: -1 1 0, -1 0.5 0, -1 0 0"></a-entity>
        <a-entity mixin="red" line="path: 1 1 0, 1 0.5 0, 1 0 0"></a-entity>
        <a-entity mixin="red" line="path: -2 -1 0, 0 -2 0, 2 -1"></a-entity> 
      </a-entity> 
    </a-scene>
    <script>
    (function(){  
        // var clickedEl = null;
        // var els = document.querySelectorAll('a-entity');
        // Array.prototype.forEach.call(els, function (el) {
        //   el.addEventListener('cursor-click', function () {
        //     if (clickedEl && clickedEl !== el) {
        //       clickedEl.removeState('selected');
        //     }
        //     if (!el.classList.contains('clickable')) { return; }
        //     clickedEl = el;
        //     clickedEl.addState('selected');
        //   });
        // });


      //   module.exports.entityFactory = function (opts) {
      //   var scene = document.createElement('a-scene');
      //   var assets = document.createElement('a-assets');
      //   var entity = document.createElement('a-entity');
      //   scene.appendChild(assets);
      //   scene.appendChild(entity);

      //   opts = opts || {};

      //   if (opts.assets) {
      //     opts.assets.forEach(function (asset) {
      //       assets.appendChild(asset);
      //     });
      //   }

      //   document.body.appendChild(scene);
      //   return entity;
      // };


      //   function setupAnimation (animationAttrs, cb, elAttrs) {
      //   var animationEl = document.createElement('a-animation');
      //   var el = this.entityFactory();
      //   var done;

      //   // TODO: have <a-animation> setAttribute support this.
      //   Object.keys(animationAttrs).forEach(function (key) {
      //     animationEl.setAttribute(key, animationAttrs[key]);
      //   });
      //   Object.keys(elAttrs || {}).forEach(function (key) {
      //     el.setAttribute(key, elAttrs[key]);
      //   });

      //   animationEl.addEventListener('animationstart', function () {
      //     if (!done) {
      //       cb(el, animationEl, window.performance.now());
      //       done = true;
      //     }
      //   });
      //   animationEl.addEventListener('loaded', function () {
      //     animationEl.start();
      //   });
      //   el.isPlaying = true;
      //   el.appendChild(animationEl);
      // }

        var bluecube=document.querySelector('#bluecube');
        var yellowcube=document.querySelector('#yellowcube');
        var greencube=document.querySelector('#greencube');
        var redcube=document.querySelector('#redcube');
        var cart=document.querySelector('#cart');
        var price=document.querySelector('#price');
        var quantity = document.querySelector('#quantity');
        var numbers=document.querySelector('#numbers');
        var numrings=document.querySelectorAll('a-ring');
        var numring1=numrings[0];
        var numring2=numrings[1];
        var numring3=numrings[2];
        var status=0;
        document.addEventListener('cursor-click',function(e){
          if((!yellowcube.isPlaying)&&(!bluecube.isPlaying)&&(!redcube.isPlaying)&&(!greencube.isPlaying)){
            status=1;
          }else{
            status=0;
          }
          switch(e.target){
            case greencube: {
              if(status==1&&!greencube.isPlaying){
                bluecube.setAttribute('visible',false);
                yellowcube.setAttribute('visible',false);
                redcube.setAttribute('visible',false);
                greencube.setAttribute('position','-2 2 1');
                price.setAttribute('visible',true);
                quantity.setAttribute('visible',true);
                numbers.setAttribute('visible',true);
              }else{
                yellowcube.setAttribute('visible', true);
                setInterval(function(){
                greencube.isPlaying=false;
                },1500);
              }
                
              break;
            }
            case yellowcube:{
              if(status==1&&!yellowcube.isPlaying){
                bluecube.setAttribute('visible',false);
                greencube.setAttribute('visible',false);
                redcube.setAttribute('visible',false);
                yellowcube.setAttribute('position','-2 2 1');
                price.setAttribute('visible',true);
                quantity.setAttribute('visible',true);
                numbers.setAttribute('visible',true);
              }else{
                bluecube.setAttribute('visible', true);
                setInterval(function(){
                  yellowcube.isPlaying=false;
                },1500);                  
              }

              break;
            }
            case bluecube: {
              if(status==1&&!bluecube.isPlaying){
                yellowcube.setAttribute('visible',false);
                greencube.setAttribute('visible',false);
                redcube.setAttribute('visible',false);
                bluecube.setAttribute('position','-2 2 1');
                price.setAttribute('visible',true);
                quantity.setAttribute('visible',true);
                numbers.setAttribute('visible',true);
              }else{
                redcube.setAttribute('visible', true);
                setInterval(function(){
                  bluecube.isPlaying=false;
                },2000);
              }
              break;
            }
            case redcube: {
              if(status==1&&!redcube.isPlaying){
                yellowcube.setAttribute('visible',false);
                greencube.setAttribute('visible',false);
                bluecube.setAttribute('visible',false);
                redcube.setAttribute('position','-2 2 1');
                price.setAttribute('visible',true);
                quantity.setAttribute('visible',true);
                numbers.setAttribute('visible',true);
              }else{
                redcube.isPlaying=false;
              }              
              break;
            }
            case cart:{
              if(cart.getAttribute('src')=='#addtocart')
                cart.setAttribute('src','#removefromcart');
              else
                cart.setAttribute('src','#addtocart');
              break;
            }
            case numring1:{
              numring1.setAttribute('color','#F35F5F');
              numring2.setAttribute('color','#36A3EB');
              numring3.setAttribute('color','#36A3EB');
              break;
            }
            case numring2:{
              numring1.setAttribute('color','#36A3EB');
              numring2.setAttribute('color','#F35F5F');
              numring3.setAttribute('color','#36A3EB');
              break;
            }
            case numring3:{
              numring1.setAttribute('color','#36A3EB');
              numring2.setAttribute('color','#36A3EB');
              numring3.setAttribute('color','#F35F5F');
              break;
            }

          }

        })

    })();
    </script>
  </body>
</html>
